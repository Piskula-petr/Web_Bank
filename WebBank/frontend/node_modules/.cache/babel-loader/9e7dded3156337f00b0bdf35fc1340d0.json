{"ast":null,"code":"var _jsxFileName = \"C:\\\\Users\\\\MSI\\\\Dropbox\\\\Git\\\\Web_Bank\\\\WebBank\\\\frontend\\\\src\\\\newPayment\\\\NewPayment.js\";\nimport React, { Component } from \"react\";\nimport { Redirect } from \"react-router-dom\";\nimport \"../css/newPayment.css\";\nimport caretDown from \"../images/caret_down.png\";\nimport bank from \"../images/bank.png\";\nimport payment from \"../images/payment.png\";\nimport TableSeparator from \"./\";\nimport InputPanel from \"./InputPanel\";\nexport default class NewPayment extends Component {\n  // Konstruktor /////////////////////////////////////////////////////////////////////\n  constructor(props) {\n    super(props);\n    this.state = {\n      // Parametry nové platby\n      payment: {\n        name: \"\",\n        mark: \"-\",\n        accountNumber: \"\",\n        amount: 0,\n        currency: \"CZK\",\n        variableSymbol: 0,\n        constantSymbol: 0,\n        specificSymbol: 0,\n        paymentDate: new Date(),\n        paymentType: \"Platba bankovním převodem\"\n      },\n      // Úspěšná platba\n      successfulPayment: false,\n      // Chybové zprávy\n      nameError: \"\",\n      accountNumberError: \"\",\n      amountError: \"\",\n      variableSymbolError: \"\",\n      constantSymbolError: \"\",\n      specificSymbolError: \"\",\n      confirmationError: \"\",\n      // Seznam bankovních kódů\n      bankCodes: [],\n      // Seznam dospotupných měn\n      currencies: [],\n      // Prefix čísla účtu\n      accountNumberPrefix: \"\",\n      // Bankovní kód\n      bankCode: \"\",\n      codeIsSelected: false,\n      // Potvrzovací kód\n      confirmationGenerated: Math.floor(Math.random() * (99999 - 10000 + 1) + 10000),\n      confirmationInput: 0\n    };\n    this.setBankCode = this.setBankCode.bind(this);\n    this.handleSubmit = this.handleSubmit.bind(this);\n    this.handleChange = this.handleChange.bind(this);\n  } // Získání dat ////////////////////////////////////////////////////////////////////\n\n\n  componentDidMount() {\n    document.title = \"Nová platba | Web Bank\"; // Request - vrací kódy bank\n\n    fetch(\"http://localhost:8080/api/bank-codes\").then(response => response.json().then(data => this.setState({\n      bankCodes: data\n    }))); // Request - vrací seznam měn\n\n    fetch(\"http://localhost:8080/api/currencies\").then(response => response.json().then(data => this.setState({\n      currencies: data.sort((a, b) => {\n        return a.id - b.id;\n      })\n    })));\n  } // Změna stavu kódu banky //////////////////////////////////////////////////////////\n\n\n  setBankCode(event) {\n    // Nastavení kódu banky, při kliknutí\n    // Přepnutí true / false\n    if (event.target.id === \"bankCode\") {\n      this.setState({\n        bankCode: event.target.attributes.name.value,\n        codeIsSelected: !this.state.codeIsSelected\n      }); // Přepnutí true / false\n    } else {\n      this.setState({\n        codeIsSelected: !this.state.codeIsSelected\n      });\n    }\n  } // Odeslání formuláře /////////////////////////////////////////////////////////////\n\n\n  handleSubmit(event) {\n    event.preventDefault(); // \n\n    this.refs.confirmationInput.value = \"\";\n    const confirmationGenerated = this.state.confirmationGenerated;\n    const confirmationInput = parseInt(this.state.confirmationInput); // Složení bankovního účtu\n\n    const accountNumber = this.state.accountNumberPrefix + \"/\" + this.state.bankCode;\n    this.setState({\n      payment: { ...this.state.payment,\n        accountNumber: accountNumber\n      }\n    }, () => {\n      // \n      fetch(\"http://localhost:8080/api/new-payment\", {\n        method: \"POST\",\n        headers: {\n          \"Content-Type\": \"application/json\"\n        },\n        body: JSON.stringify(this.state.payment)\n      }).then(response => response.json().then(data => {\n        // Úspěšná platba\n        if (response.ok) {\n          this.setState({\n            successfulPayment: true\n          });\n        } else {\n          // \n          let confirmationError = \"Ověřovací kód není správný\";\n\n          if (confirmationGenerated === confirmationInput) {\n            confirmationError = \"\";\n          } // \n\n\n          let accountNumberError = data.accountNumber;\n\n          if (this.state.payment.accountNumber.length === 11 && this.state.bankCode === \"\") {\n            accountNumberError = \"Kód banky musí být zadán\";\n          } // Změna stavu chybových zpráv\n\n\n          this.setState({\n            nameError: data.name,\n            accountNumberError: accountNumberError,\n            amountError: data.amount,\n            variableSymbolError: data.variableSymbol,\n            constantSymbolError: data.constantSymbol,\n            specificSymbolError: data.specificSymbol,\n            confirmationError: confirmationError,\n            confirmationGenerated: Math.floor(Math.random() * (99999 - 10000 + 1) + 10000)\n          });\n        }\n      }));\n    });\n  } // Změna stavu zadaných údajů /////////////////////////////////////////////////////\n\n\n  handleChange(event) {\n    const name = event.target.name;\n    let value = event.target.value;\n\n    if (name === \"accountNumberPrefix\" || name === \"confirmationInput\") {\n      this.setState({\n        [name]: value\n      });\n    } else {\n      // \n      if (value.includes(\",\")) {\n        value = value.replace(\",\", \".\");\n      }\n\n      this.setState({\n        payment: { ...this.state.payment,\n          [name]: value\n        }\n      });\n    }\n  } // Vykreslení /////////////////////////////////////////////////////////////////////\n\n\n  render() {\n    // \n    if (this.state.successfulPayment) {\n      return /*#__PURE__*/React.createElement(Redirect, {\n        to: \"/prehled\",\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 220,\n          columnNumber: 20\n        }\n      });\n    }\n\n    return /*#__PURE__*/React.createElement(\"div\", {\n      id: \"newPaymentContainer\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 224,\n        columnNumber: 13\n      }\n    }, /*#__PURE__*/React.createElement(\"form\", {\n      id: \"newPayment\",\n      onSubmit: this.handleSubmit,\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 226,\n        columnNumber: 17\n      }\n    }, /*#__PURE__*/React.createElement(\"img\", {\n      id: \"payment\",\n      src: payment,\n      alt: \"Payment\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 228,\n        columnNumber: 21\n      }\n    }), /*#__PURE__*/React.createElement(\"h1\", {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 230,\n        columnNumber: 21\n      }\n    }, \"Nov\\xE1 platba\"), /*#__PURE__*/React.createElement(\"hr\", {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 231,\n        columnNumber: 21\n      }\n    }), \" \", /*#__PURE__*/React.createElement(\"br\", {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 231,\n        columnNumber: 27\n      }\n    }), /*#__PURE__*/React.createElement(\"table\", {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 233,\n        columnNumber: 21\n      }\n    }, /*#__PURE__*/React.createElement(\"tbody\", {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 234,\n        columnNumber: 25\n      }\n    }, /*#__PURE__*/React.createElement(\"tr\", {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 235,\n        columnNumber: 29\n      }\n    }, /*#__PURE__*/React.createElement(\"td\", {\n      colSpan: \"2\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 236,\n        columnNumber: 33\n      }\n    }, /*#__PURE__*/React.createElement(\"br\", {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 237,\n        columnNumber: 37\n      }\n    }), /*#__PURE__*/React.createElement(\"div\", {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 238,\n        columnNumber: 37\n      }\n    }, \"Povinn\\xE9 \\xFAdaje\"), /*#__PURE__*/React.createElement(\"hr\", {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 239,\n        columnNumber: 37\n      }\n    }))), /*#__PURE__*/React.createElement(InputPanel, {\n      name: \"name\",\n      label: \"N\\xE1zev platby:\",\n      placeholder: \"N\\xE1jem bytu\",\n      error: this.state.nameError,\n      onChange: this.handleChange,\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 243,\n        columnNumber: 29\n      }\n    }), /*#__PURE__*/React.createElement(\"tr\", {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 246,\n        columnNumber: 29\n      }\n    }, /*#__PURE__*/React.createElement(\"td\", {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 247,\n        columnNumber: 33\n      }\n    }, /*#__PURE__*/React.createElement(\"label\", {\n      htmlFor: \"accountNumberPrefix\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 248,\n        columnNumber: 37\n      }\n    }, \"\\u010C\\xEDslo \\xFA\\u010Dtu:\")), /*#__PURE__*/React.createElement(\"td\", {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 251,\n        columnNumber: 33\n      }\n    }, /*#__PURE__*/React.createElement(\"div\", {\n      id: \"error\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 252,\n        columnNumber: 37\n      }\n    }, this.state.accountNumberError), /*#__PURE__*/React.createElement(\"input\", {\n      id: \"accountNumberPrefix\",\n      placeholder: \"7253962689\",\n      type: \"text\",\n      name: \"accountNumberPrefix\",\n      onChange: this.handleChange,\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 254,\n        columnNumber: 37\n      }\n    }), /*#__PURE__*/React.createElement(\"div\", {\n      id: \"bankCodesSelect\",\n      onClick: this.setBankCode,\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 257,\n        columnNumber: 37\n      }\n    }, /*#__PURE__*/React.createElement(\"div\", {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 258,\n        columnNumber: 41\n      }\n    }, /*#__PURE__*/React.createElement(\"div\", {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 259,\n        columnNumber: 45\n      }\n    }, this.state.bankCode), /*#__PURE__*/React.createElement(\"img\", {\n      id: \"bank\",\n      src: bank,\n      alt: \"Bank\",\n      className: this.state.bankCode ? \"hide\" : \"\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 261,\n        columnNumber: 45\n      }\n    }), /*#__PURE__*/React.createElement(\"img\", {\n      id: \"caretDown\",\n      src: caretDown,\n      alt: \"Caret Down\",\n      className: this.state.bankCode ? \"hide\" : \"\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 264,\n        columnNumber: 45\n      }\n    })), /*#__PURE__*/React.createElement(\"div\", {\n      id: \"bankCodesChoice\",\n      className: this.state.codeIsSelected ? \"show\" : \"hide\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 268,\n        columnNumber: 41\n      }\n    }, this.state.bankCodes.map((item, index) => /*#__PURE__*/React.createElement(\"div\", {\n      id: \"bankCode\",\n      key: index,\n      onClick: this.setBankCode,\n      name: item.code,\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 271,\n        columnNumber: 49\n      }\n    }, item.code, \" - \", item.name)))))), /*#__PURE__*/React.createElement(\"tr\", {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 280,\n        columnNumber: 29\n      }\n    }, /*#__PURE__*/React.createElement(\"td\", {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 281,\n        columnNumber: 33\n      }\n    }, /*#__PURE__*/React.createElement(\"label\", {\n      htmlFor: \"amount\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 282,\n        columnNumber: 37\n      }\n    }, \"\\u010C\\xE1stka:\")), /*#__PURE__*/React.createElement(\"td\", {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 285,\n        columnNumber: 33\n      }\n    }, /*#__PURE__*/React.createElement(\"div\", {\n      id: \"error\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 286,\n        columnNumber: 37\n      }\n    }, this.state.amountError), /*#__PURE__*/React.createElement(\"input\", {\n      id: \"amount\",\n      placeholder: \"0,00\",\n      type: \"text\",\n      name: \"amount\",\n      onChange: this.handleChange,\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 288,\n        columnNumber: 37\n      }\n    }), /*#__PURE__*/React.createElement(\"select\", {\n      name: \"currency\",\n      onChange: this.handleChange,\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 295,\n        columnNumber: 37\n      }\n    }, this.state.currencies.map((item, index) => /*#__PURE__*/React.createElement(\"option\", {\n      key: index,\n      name: \"currency\",\n      value: item.code,\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 298,\n        columnNumber: 45\n      }\n    }, item.code))))), /*#__PURE__*/React.createElement(\"tr\", {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 306,\n        columnNumber: 29\n      }\n    }, /*#__PURE__*/React.createElement(\"td\", {\n      colSpan: \"2\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 307,\n        columnNumber: 33\n      }\n    }, /*#__PURE__*/React.createElement(\"br\", {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 308,\n        columnNumber: 37\n      }\n    }), \" \", /*#__PURE__*/React.createElement(\"br\", {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 308,\n        columnNumber: 43\n      }\n    }), /*#__PURE__*/React.createElement(\"div\", {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 309,\n        columnNumber: 37\n      }\n    }, \"Nepovinn\\xE9 \\xFAdaje\"), /*#__PURE__*/React.createElement(\"hr\", {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 310,\n        columnNumber: 37\n      }\n    }))), /*#__PURE__*/React.createElement(InputPanel, {\n      name: \"variableSymbol\",\n      label: \"Variabiln\\xED symbol:\",\n      placeholder: \"5795504032\",\n      error: this.state.variableSymbolError,\n      onChange: this.handleChange,\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 314,\n        columnNumber: 29\n      }\n    }), /*#__PURE__*/React.createElement(InputPanel, {\n      name: \"constantSymbol\",\n      label: \"Konstantn\\xED symbol:\",\n      placeholder: \"5296841057\",\n      error: this.state.constantSymbolError,\n      onChange: this.handleChange,\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 317,\n        columnNumber: 29\n      }\n    }), /*#__PURE__*/React.createElement(InputPanel, {\n      name: \"specificSymbol\",\n      label: \"Specifick\\xFD symbol:\",\n      placeholder: \"4398956257\",\n      error: this.state.specificSymbolError,\n      onChange: this.handleChange,\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 320,\n        columnNumber: 29\n      }\n    }), /*#__PURE__*/React.createElement(\"tr\", {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 323,\n        columnNumber: 29\n      }\n    }, /*#__PURE__*/React.createElement(\"td\", {\n      colSpan: \"2\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 324,\n        columnNumber: 33\n      }\n    }, /*#__PURE__*/React.createElement(\"br\", {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 325,\n        columnNumber: 37\n      }\n    }), \" \", /*#__PURE__*/React.createElement(\"br\", {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 325,\n        columnNumber: 43\n      }\n    }), /*#__PURE__*/React.createElement(\"div\", {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 326,\n        columnNumber: 37\n      }\n    }, \"Ov\\u011B\\u0159en\\xED\"), /*#__PURE__*/React.createElement(\"hr\", {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 327,\n        columnNumber: 37\n      }\n    }))), /*#__PURE__*/React.createElement(\"tr\", {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 331,\n        columnNumber: 29\n      }\n    }, /*#__PURE__*/React.createElement(\"td\", {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 332,\n        columnNumber: 33\n      }\n    }, /*#__PURE__*/React.createElement(\"label\", {\n      htmlFor: \"confirmationInput\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 333,\n        columnNumber: 37\n      }\n    }, \"Ov\\u011B\\u0159ovac\\xED k\\xF3d:\")), /*#__PURE__*/React.createElement(\"td\", {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 336,\n        columnNumber: 33\n      }\n    }, /*#__PURE__*/React.createElement(\"div\", {\n      id: \"confirmationError\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 337,\n        columnNumber: 37\n      }\n    }, this.state.confirmationError), /*#__PURE__*/React.createElement(\"input\", {\n      id: \"confirmationInput\",\n      ref: \"confirmationInput\",\n      type: \"text\",\n      name: \"confirmationInput\",\n      onChange: this.handleChange,\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 339,\n        columnNumber: 37\n      }\n    }), /*#__PURE__*/React.createElement(\"div\", {\n      id: \"confirmationValue\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 346,\n        columnNumber: 37\n      }\n    }, this.state.confirmationGenerated))))), /*#__PURE__*/React.createElement(\"button\", {\n      type: \"submit\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 352,\n        columnNumber: 21\n      }\n    }, \"Odeslat platbu\")));\n  }\n\n}","map":{"version":3,"sources":["C:/Users/MSI/Dropbox/Git/Web_Bank/WebBank/frontend/src/newPayment/NewPayment.js"],"names":["React","Component","Redirect","caretDown","bank","payment","TableSeparator","InputPanel","NewPayment","constructor","props","state","name","mark","accountNumber","amount","currency","variableSymbol","constantSymbol","specificSymbol","paymentDate","Date","paymentType","successfulPayment","nameError","accountNumberError","amountError","variableSymbolError","constantSymbolError","specificSymbolError","confirmationError","bankCodes","currencies","accountNumberPrefix","bankCode","codeIsSelected","confirmationGenerated","Math","floor","random","confirmationInput","setBankCode","bind","handleSubmit","handleChange","componentDidMount","document","title","fetch","then","response","json","data","setState","sort","a","b","id","event","target","attributes","value","preventDefault","refs","parseInt","method","headers","body","JSON","stringify","ok","length","includes","replace","render","map","item","index","code"],"mappings":"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","sourcesContent":["import React, {Component} from \"react\";\r\nimport {Redirect} from \"react-router-dom\";\r\nimport \"../css/newPayment.css\";\r\n\r\nimport caretDown from \"../images/caret_down.png\";\r\nimport bank from \"../images/bank.png\";\r\nimport payment from \"../images/payment.png\";\r\n\r\nimport TableSeparator from \"./\"\r\nimport InputPanel from \"./InputPanel\";\r\n\r\nexport default class NewPayment extends Component {\r\n\r\n// Konstruktor /////////////////////////////////////////////////////////////////////\r\n\r\n    constructor(props) {\r\n        super(props);\r\n\r\n        this.state = {\r\n\r\n            // Parametry nové platby\r\n            payment: {\r\n                name: \"\",\r\n                mark: \"-\",\r\n                accountNumber: \"\",\r\n                amount: 0,\r\n                currency: \"CZK\",\r\n                variableSymbol: 0,\r\n                constantSymbol: 0,\r\n                specificSymbol: 0,\r\n                paymentDate: new Date(),\r\n                paymentType: \"Platba bankovním převodem\",\r\n            },\r\n\r\n            // Úspěšná platba\r\n            successfulPayment : false,\r\n\r\n            // Chybové zprávy\r\n            nameError: \"\",\r\n            accountNumberError: \"\",\r\n            amountError: \"\",\r\n            variableSymbolError: \"\",\r\n            constantSymbolError: \"\",\r\n            specificSymbolError: \"\",\r\n            confirmationError: \"\",\r\n\r\n            // Seznam bankovních kódů\r\n            bankCodes: [],\r\n\r\n            // Seznam dospotupných měn\r\n            currencies: [],\r\n\r\n            // Prefix čísla účtu\r\n            accountNumberPrefix: \"\",\r\n\r\n            // Bankovní kód\r\n            bankCode: \"\",\r\n            codeIsSelected: false,\r\n\r\n            // Potvrzovací kód\r\n            confirmationGenerated: Math.floor(Math.random() * (99999 - 10000 + 1) + 10000),\r\n            confirmationInput: 0,\r\n        }\r\n\r\n        this.setBankCode = this.setBankCode.bind(this);\r\n        this.handleSubmit = this.handleSubmit.bind(this);\r\n        this.handleChange = this.handleChange.bind(this);\r\n    }\r\n\r\n// Získání dat ////////////////////////////////////////////////////////////////////\r\n\r\n    componentDidMount() {\r\n        document.title = \"Nová platba | Web Bank\";\r\n\r\n        // Request - vrací kódy bank\r\n        fetch(\"http://localhost:8080/api/bank-codes\").then(response => response.json()\r\n            .then(data => this.setState({\r\n                bankCodes: data,\r\n        })));\r\n\r\n        // Request - vrací seznam měn\r\n        fetch(\"http://localhost:8080/api/currencies\").then(response => response.json()\r\n            .then(data => this.setState({\r\n                currencies: data.sort((a, b) => {return a.id - b.id}),\r\n        })));\r\n    }\r\n\r\n// Změna stavu kódu banky //////////////////////////////////////////////////////////\r\n\r\n    setBankCode(event) {\r\n\r\n        // Nastavení kódu banky, při kliknutí\r\n        // Přepnutí true / false\r\n        if (event.target.id === \"bankCode\") {\r\n\r\n            this.setState({\r\n                bankCode: event.target.attributes.name.value,\r\n                codeIsSelected: !this.state.codeIsSelected,\r\n            });\r\n\r\n        // Přepnutí true / false\r\n        } else {\r\n\r\n            this.setState({\r\n                codeIsSelected: !this.state.codeIsSelected,\r\n            });\r\n        }\r\n    }\r\n\r\n// Odeslání formuláře /////////////////////////////////////////////////////////////\r\n\r\n    handleSubmit(event) {\r\n        event.preventDefault();\r\n\r\n        // \r\n        this.refs.confirmationInput.value = \"\";\r\n\r\n        const confirmationGenerated = this.state.confirmationGenerated;\r\n        const confirmationInput = parseInt(this.state.confirmationInput)\r\n\r\n        // Složení bankovního účtu\r\n        const accountNumber = this.state.accountNumberPrefix + \"/\" + this.state.bankCode;\r\n\r\n        this.setState({\r\n\r\n            payment: {\r\n                ...this.state.payment,\r\n                accountNumber: accountNumber,\r\n            }\r\n        }, () => {\r\n\r\n            // \r\n            fetch(\"http://localhost:8080/api/new-payment\", {\r\n\r\n                method: \"POST\",\r\n                headers: {\"Content-Type\": \"application/json\"},\r\n\r\n                body: JSON.stringify(this.state.payment),\r\n\r\n            }).then(response => response.json().then(data => {\r\n\r\n                // Úspěšná platba\r\n                if (response.ok) {\r\n\r\n                    this.setState({\r\n                        successfulPayment: true,\r\n                    });\r\n\r\n                } else {\r\n\r\n                    // \r\n                    let confirmationError = \"Ověřovací kód není správný\";\r\n                    if (confirmationGenerated === confirmationInput) {\r\n\r\n                        confirmationError = \"\";\r\n                    }\r\n\r\n                    // \r\n                    let accountNumberError = data.accountNumber;\r\n                    if (this.state.payment.accountNumber.length === 11 &&\r\n                        this.state.bankCode === \"\") {\r\n\r\n                        accountNumberError = \"Kód banky musí být zadán\";\r\n                    }\r\n\r\n                    // Změna stavu chybových zpráv\r\n                    this.setState({\r\n                        nameError: data.name,\r\n                        accountNumberError: accountNumberError,\r\n                        amountError: data.amount,\r\n                        variableSymbolError: data.variableSymbol,\r\n                        constantSymbolError: data.constantSymbol,\r\n                        specificSymbolError: data.specificSymbol,\r\n\r\n                        confirmationError: confirmationError,\r\n                        confirmationGenerated: Math.floor(Math.random() * (99999 - 10000 + 1) + 10000),\r\n                    });\r\n                }\r\n            }));\r\n        });\r\n    }\r\n\r\n// Změna stavu zadaných údajů /////////////////////////////////////////////////////\r\n\r\nhandleChange(event) {\r\n\r\n    const name = event.target.name;\r\n    let value = event.target.value;\r\n\r\n    if (name === \"accountNumberPrefix\" || name === \"confirmationInput\") {\r\n        \r\n        this.setState({\r\n            [name]: value,\r\n        });\r\n\r\n    } else {\r\n\r\n        // \r\n        if (value.includes(\",\")) {\r\n\r\n            value = value.replace(\",\", \".\");\r\n        }\r\n\r\n        this.setState({\r\n\r\n            payment: {\r\n                ...this.state.payment,\r\n                [name]: value,\r\n            }\r\n        });\r\n    }\r\n}\r\n\r\n// Vykreslení /////////////////////////////////////////////////////////////////////\r\n\r\n    render() {\r\n\r\n        // \r\n        if ( this.state.successfulPayment) {\r\n            return <Redirect to=\"/prehled\" />;\r\n        }\r\n\r\n        return(\r\n            <div id=\"newPaymentContainer\">\r\n\r\n                <form id=\"newPayment\" onSubmit={this.handleSubmit}>\r\n\r\n                    <img id=\"payment\" src={payment} alt=\"Payment\" />\r\n\r\n                    <h1>Nová platba</h1>\r\n                    <hr/> <br/>\r\n\r\n                    <table>\r\n                        <tbody>\r\n                            <tr>\r\n                                <td colSpan=\"2\">\r\n                                    <br/>\r\n                                    <div>Povinné údaje</div>\r\n                                    <hr/>\r\n                                </td>\r\n                            </tr>\r\n\r\n                            <InputPanel name=\"name\" label=\"Název platby:\" placeholder=\"Nájem bytu\" \r\n                                error={this.state.nameError} onChange={this.handleChange} />\r\n\r\n                            <tr>\r\n                                <td>\r\n                                    <label htmlFor=\"accountNumberPrefix\">Číslo účtu:</label>\r\n                                </td>\r\n\r\n                                <td>\r\n                                    <div id=\"error\">{this.state.accountNumberError}</div>\r\n\r\n                                    <input id=\"accountNumberPrefix\" placeholder=\"7253962689\" type=\"text\" \r\n                                           name=\"accountNumberPrefix\" onChange={this.handleChange} />\r\n\r\n                                    <div id=\"bankCodesSelect\" onClick={this.setBankCode}>\r\n                                        <div>\r\n                                            <div>{this.state.bankCode}</div>\r\n\r\n                                            <img id=\"bank\" src={bank} alt=\"Bank\" \r\n                                                 className={(this.state.bankCode) ? \"hide\" : \"\"} />\r\n\r\n                                            <img id=\"caretDown\" src={caretDown} alt=\"Caret Down\"\r\n                                                 className={(this.state.bankCode) ? \"hide\" : \"\"} />\r\n                                        </div>\r\n\r\n                                        <div id=\"bankCodesChoice\" className={(this.state.codeIsSelected) ? \"show\" : \"hide\"}>\r\n                                            {this.state.bankCodes.map((item, index) => \r\n                                                \r\n                                                <div id=\"bankCode\" key={index} onClick={this.setBankCode} name={item.code}>\r\n                                                    {item.code} - {item.name}\r\n                                                </div>\r\n                                            )} \r\n                                        </div>\r\n                                    </div>\r\n                                </td>\r\n                            </tr>\r\n\r\n                            <tr>\r\n                                <td>\r\n                                    <label htmlFor=\"amount\">Částka:</label>\r\n                                </td>\r\n\r\n                                <td>\r\n                                    <div id=\"error\">{this.state.amountError}</div>      \r\n\r\n                                    <input id=\"amount\" \r\n                                           placeholder=\"0,00\" \r\n                                           type=\"text\"\r\n                                           name=\"amount\"\r\n                                           onChange={this.handleChange}\r\n                                    />\r\n\r\n                                    <select name=\"currency\" onChange={this.handleChange}>\r\n                                        {this.state.currencies.map((item, index) =>\r\n\r\n                                            <option key={index} name=\"currency\" value={item.code}>\r\n                                                {item.code}\r\n                                            </option>\r\n                                        )}\r\n                                    </select>\r\n                                </td>\r\n                            </tr>\r\n\r\n                            <tr>\r\n                                <td colSpan=\"2\">\r\n                                    <br/> <br/>\r\n                                    <div>Nepovinné údaje</div>\r\n                                    <hr/>\r\n                                </td>\r\n                            </tr>\r\n\r\n                            <InputPanel name=\"variableSymbol\" label=\"Variabilní symbol:\" placeholder=\"5795504032\" \r\n                                error={this.state.variableSymbolError} onChange={this.handleChange} />\r\n\r\n                            <InputPanel name=\"constantSymbol\" label=\"Konstantní symbol:\" placeholder=\"5296841057\" \r\n                                error={this.state.constantSymbolError} onChange={this.handleChange} />\r\n\r\n                            <InputPanel name=\"specificSymbol\" label=\"Specifický symbol:\" placeholder=\"4398956257\" \r\n                                error={this.state.specificSymbolError} onChange={this.handleChange} />\r\n\r\n                            <tr>\r\n                                <td colSpan=\"2\">\r\n                                    <br/> <br/>\r\n                                    <div>Ověření</div>\r\n                                    <hr/>\r\n                                </td>\r\n                            </tr>\r\n\r\n                            <tr>\r\n                                <td>\r\n                                    <label htmlFor=\"confirmationInput\">Ověřovací kód:</label>\r\n                                </td>\r\n\r\n                                <td>\r\n                                    <div id=\"confirmationError\">{this.state.confirmationError}</div>\r\n\r\n                                    <input id=\"confirmationInput\" \r\n                                           ref=\"confirmationInput\"\r\n                                           type=\"text\"\r\n                                           name=\"confirmationInput\"\r\n                                           onChange={this.handleChange} \r\n                                    />\r\n\r\n                                    <div id=\"confirmationValue\">{this.state.confirmationGenerated}</div>\r\n                                </td>\r\n                            </tr>\r\n                        </tbody>\r\n                    </table>\r\n\r\n                    <button type=\"submit\">Odeslat platbu</button>\r\n                </form>\r\n            </div>\r\n        )\r\n    }\r\n}"]},"metadata":{},"sourceType":"module"}